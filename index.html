<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prueba de Widget CCAI</title>
    <script defer
  src="https://www.gstatic.com/ces-console/fast/chat-messenger/prod/v1.12/chat-messenger.js">
</script>
<link rel="stylesheet" href="https://www.gstatic.com/ces-console/fast/chat-messenger/prod/v1.12/themes/chat-messenger-default.css">
<link rel="stylesheet" href="https://www.gstatic.com/ces-console/fast/chat-messenger/prod/v1.10/themes/chat-messenger-layout.css">
    <style>
        /* Estilos básicos para que la página no se vea vacía */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f7f6;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            color: #333;
        }
        .container {
            text-align: center;
            padding: 20px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        h1 { color: #4285F4; }
        p { color: #666; }
    </style>
</head>
<body>

    <div class="container">
        <h1>Asistente Virtual CCAI</h1>
        <p>El widget debería aparecer en la esquina inferior derecha.</p>
        <p>Si no aparece, revisa la consola (F12) y los dominios permitidos.</p>
    </div>

    <script src="https://www.gstatic.com/dialogflow-console/fast/messenger/bootstrap.js?v=1"></script>
    <df-messenger
      intent="WELCOME"
      chat-title="Mi Asistente"
      agent-id="TU_AGENT_ID_AQUÍ"
      language-code="es"
    ></df-messenger>


    <script>
    window.addEventListener("chat-messenger-loaded", () => {
      chatSdk.registerContext(
        chatSdk.prebuilts.ces.createContext({
          deploymentName: "projects/poc-palacio/locations/us/apps/02e234c9-f9aa-4ff4-bb9d-3337fbce95da/deployments/c40f2b82-b742-49b9-a0cb-4ee1973a71ad",
          tokenBroker: {
            enableTokenBroker: true,
            enableRecaptcha: false,
          },
        }),
      );
    });
</script>
<!-- Update the url-allowlist attribute with a comma-separated list of origins allowed to render images -->
<chat-messenger
  url-allowlist="*"
>
  <chat-messenger-container
    chat-title="poc"
    chat-title-icon="https://gstatic.com/dialogflow-console/common/assets/ccai-favicons/conversational_agents.png"
    enable-file-upload
    enable-audio-input
  >
    <chat-reset-session-button
      slot="titlebar-actions"
      title-text="Start new chat"
    ></chat-reset-session-button>
  </chat-messenger-container>
</chat-messenger>
    </body>
</html>
